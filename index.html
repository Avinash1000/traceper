<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>map tracker</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<meta name="keywords"  content="" />
		<meta name="description" content="" />
		<link rel="stylesheet" type="text/css" href="style.css" />
		
 <!--	<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=true&amp;key=ABQIAAAAEUQFPfeMmwQlu4rVizjq5RTUBQ_8WQnJ0r_AJ0Rg3Y6UmQXNMhTgFS-OpJG3vTTQzF67ve7Li8eh_g"
    type="text/javascript"></script>		
-->

      <script type="text/javascript" src="http://www.google.com/jsapi?key=ABQIAAAAEUQFPfeMmwQlu4rVizjq5RTUBQ_8WQnJ0r_AJ0Rg3Y6UmQXNMhTgFS-OpJG3vTTQzF67ve7Li8eh_g">
   </script>
   
      <script type="text/javascript" charset="utf-8">
   
        google.load("maps", "2.x");
   
        google.load("jquery", "1.3.1");
		
		google.load("jqueryui", "1.7.1");
   
      </script>
	  <link type="text/css" href="js/jquery/jquery-ui/css/smoothness/jquery-ui-1.7.1.custom.css" rel="stylesheet" />

<!--	<script type="text/javascript" src="js/jquery/jquery.min.js"></script>
		<script type="text/javascript" src="js/jquery/jquery-ui/js/jquery-ui-1.7.1.custom.min.js"></script>
-->	
		<script type="text/javascript" src="js/TrackerOperator.js"></script>
 		
	
	<script type="text/javascript">
		function horizontalToggle(element){
			if ($(element).css('display') == "none"){
				$(element).show();
				$('#map').css('width','72%');
			}	
			else {
				$(element).hide();				
				$('#map').css('width','98%');
			}
		}



		var trackerOp;
		$(document).ready( function() {	
			var map;
			$('#lists').tabs();	

      			if (GBrowserIsCompatible()) 
				{
        			map = new GMap2(document.getElementById("map"));
        			map.setCenter(new GLatLng(39.504041,35.024414), 2);
					map.setUIToDefault();					
					map.setMapType(G_HYBRID_MAP);
					
					trackerOp = new TrackerOperator("index.php", map, 1500);
					trackerOp.getUserList(1);
					//TODO: simultaneous ajax requests
					GEvent.addListener(map, "load", function() {
  						alert("map loaded");
					});	        			
	      		}
				
				$('#searchButton').click(function(){

					trackerOp.searchUser($('#searchBox').attr('value'), 1);
					
				});
				
				$("#aboutus, #termsofuse").dialog({						
					
						autoOpen: false,
						buttons: {
							Ok: function() {
								$(this).dialog('close');
							}
						}				
				});
				$("a[href=#touLink]").click(function(){
					$('#termsofuse').dialog( 'open');	
				});
				$("a[href=#auLink]").click(function(){
					$('#aboutus').dialog( 'open');
				});
				
		});		
	</script>
	</head>
	<body  onunload="GUnload();" >
	<div id='wrap'>							
				<div id='sideBar'>						
						<div id='logo'>LOGO</div>															
						<div id='lists'>
							<ul>
								<li><a href="#users">Users</a></li>
								<li><a href="#search">Search</a></li>
							</ul>
							<div id="users"></div>
							<div id="search">
								<input type='text' id='searchBox' size=20 /><input type='button' id='searchButton' value='search'/>
								<div id='searchResults'>									
								</div>
							</div>
						</div>						
						<div id='footer'><a href='#touLink'>Terms of use</a><a href='#auLink'>About us</a></div>																	
				</div>
				<div id='bar' onclick="horizontalToggle('#sideBar');"></div>
				<div id='map'>MAP</div>				
										
	</div>	
	<div id='aboutus'>About us</div>
	<div id='termsofuse'>Terms of use</div>		
	</body>
</html>


